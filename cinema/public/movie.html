<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BEST MOVIES - Filme</title>
    <link rel="stylesheet" href="./styles/movie.css">
    
    <!-- IMPORTANTE: Ordem correta dos scripts -->
    <script src="./scripts/movie-data.js"></script>
    <script src="./scripts/api-service.js"></script>
    <script src="./scripts/movie.js" defer></script>
</head>
<body>
    <header class="movie-header">
        <div class="container">
            <div class="header-content">
                <div class="logo">CineMax</div>
                <nav>
                    <ul>
                        <li><a href="index.html">In√≠cio</a></li>
                        <li><a href="#" class="active">Filmes</a></li>
                        <li><a href="#">Cinemas</a></li>
                        <li><a href="#">Promo√ß√µes</a></li>
                        <li><a href="login.html">Minha Conta</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <!-- Hero do Filme -->
    <section class="movie-hero">
        <div class="container">
            <div class="movie-hero-content">
                <div class="movie-poster">
                    <img id="movie-poster-img" src="../images/placeholder.jpg" alt="Carregando..." class="poster-image">
                </div>
                <div class="movie-info">
                    <h1 id="movie-title" class="movie-title">Carregando...</h1>
                    <div class="movie-meta">
                        <span id="movie-duration" class="duration">--</span>
                        <span id="movie-genre" class="genre">--</span>
                        <span id="movie-rating" class="rating">--</span>
                    </div>
                    <p id="movie-description" class="movie-description">Carregando informa√ß√µes do filme...</p>
                    
                    <div class="movie-actions">
                        <button class="btn-action" id="btn-remember">
                            <span>üíæ</span>
                            Lembre-me
                        </button>
                        <button class="btn-action" id="btn-share">
                            <span>üì§</span>
                            Compartilhar
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Trailer -->
    <section class="trailer-section">
        <div class="container">
            <h2>Trailer</h2>
            <div class="trailer-container">
                <div class="video-wrapper" id="trailer-wrapper">
                    <div class="video-placeholder" id="trailer-placeholder">
                        <div class="play-button">‚ñ∂</div>
                        <p>Carregando trailer...</p>
                    </div>
                    <iframe 
                        id="trailer-iframe"
                        width="100%" 
                        height="450" 
                        src="" 
                        frameborder="0" 
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                        allowfullscreen
                        style="display: none; border-radius: 12px;"
                    ></iframe>
                </div>
            </div>
        </div>
    </section>

    <!-- Sess√µes -->
    <section class="sessions-section">
        <div class="container">
            <div class="section-header">
                <h2>Sess√µes</h2>
                <nav class="sessions-nav">
                    <a href="#sobre" class="active">Sobre o filme</a>
                </nav>
            </div>

            <!-- Sele√ß√£o de Data -->
            <div class="date-selector">
                <div class="date-option active" data-date="0">
                    <span class="day">HOJE</span>
                    <span class="date" id="date-0">--/--</span>
                </div>
                <div class="date-option" data-date="1">
                    <span class="day">AMANH√É</span>
                    <span class="date" id="date-1">--/--</span>
                </div>
                <div class="date-option" data-date="2">
                    <span class="day">SEG</span>
                    <span class="date" id="date-2">--/--</span>
                </div>
                <div class="date-option" data-date="3">
                    <span class="day">TER</span>
                    <span class="date" id="date-3">--/--</span>
                </div>
                <div class="date-option" data-date="4">
                    <span class="day">QUA</span>
                    <span class="date" id="date-4">--/--</span>
                </div>
            </div>

            <!-- Cinemas e Hor√°rios -->
            <div class="cinemas-container">
                <!-- As sess√µes ser√£o carregadas dinamicamente do backend -->
                <div class="cinema-card">
                    <h3 class="cinema-name">Carregando sess√µes...</h3>
                    <p class="cinema-address">Por favor, aguarde...</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="movie-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Sobre N√≥s</h3>
                    <p>O CineMax √© a maior rede de cinemas do pa√≠s, oferecendo a melhor experi√™ncia em entretenimento.</p>
                </div>
                <div class="footer-section">
                    <h3>Contato</h3>
                    <p>Email: contato@cinemax.com</p>
                    <p>Telefone: (11) 1234-5678</p>
                </div>
                <div class="footer-section">
                    <h3>Redes Sociais</h3>
                    <p>Facebook | Instagram | Twitter</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2023 CineMax. Todos os direitos reservados.</p>
            </div>
        </div>
    </footer>

    <div id="seat-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <button class="modal-close" onclick="closeSeatModal()">&times;</button>
            <h2>Escolha seus assentos</h2>
            
            <div class="seat-selection-container">
                <div class="screen-legend">TELA</div>
                
                <div id="seat-grid" class="seat-grid">
                    <p>Carregando assentos...</p>
                </div>
                
                <div class="seat-legend">
                    <div class="legend-item"><span class="seat-icon available"></span> Dispon√≠vel</div>
                    <div class="legend-item"><span class="seat-icon selected"></span> Selecionado</div>
                    <div class="legend-item"><span class="seat-icon occupied"></span> Ocupado</div>
                </div>
            </div>
            
            <div class="booking-summary">
                <p>Sess√£o: <span id="summary-session-time">--:--</span></p>
                <p>Assentos: <span id="summary-seats">Nenhum</span></p>
                <p>Total: <span id="summary-total">R$ 0,00</span></p>
                <button class="btn-confirm-booking" onclick="confirmBooking()">Confirmar Reserva</button>
            </div>
        </div>
    </div>

    <div id="alert-modal" class="modal-overlay" style="display: none;" onclick="closeCustomAlert()">
        <div class="modal-content alert-content" onclick="event.stopPropagation()">
            <h3 id="alert-title">Aten√ß√£o</h3>
            <p id="alert-message">Mensagem de alerta aqui.</p>
            <button class="btn-confirm-booking" onclick="closeCustomAlert()">OK</button>
        </div>
    </div>

    <div id="cpf-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content alert-content" onclick="event.stopPropagation()">
            <button class="modal-close" onclick="closeCpfModal()">&times;</button>
            <h3>Confirma√ß√£o de Reserva</h3>
            <p>Por favor, digite seu CPF para finalizar a reserva:</p>
            <input type="text" id="cpf-input" class="cpf-input" placeholder="Apenas n√∫meros (11 d√≠gitos)">
            <button class="btn-confirm-booking" onclick="handleCpfSubmit()">Confirmar CPF</button>
        </div>
    </div>
</body>
</html>